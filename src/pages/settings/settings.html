<!--
  Generated template for the SettingsPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <ion-title>Settings</ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <form [formGroup]="settingsForm" (ngSubmit)="onSubmit()">
    <ion-grid>
      <ion-row>
        <ion-col col-md-6 offset-md-3>
          <ion-list  radio-group formControlName="temperatureUnit">
              <h1>Temperature units</h1>
            <ion-item color="secondary">
              <ion-label>Standard</ion-label>
              <ion-radio value="standard" checked = "{{temperatureUnit === 'standard' ? true : false }}" ></ion-radio>
            </ion-item>

            <ion-item color="secondary">
              <ion-label>Metric</ion-label>
              <ion-radio value="metric" checked = "{{temperatureUnit === 'metric' ? true : false }}"></ion-radio>
            </ion-item>

            <ion-item color="secondary">
              <ion-label>Imperial</ion-label>
              <ion-radio value="imperial" checked = "{{temperatureUnit === 'imperial' ? true : false }}"></ion-radio>
            </ion-item>
          </ion-list>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col col-md-6 offset-md-3>
          <h1>Location</h1>
          <ion-searchbar
            (ionInput)="findLocation()"
            placeholder= "{{settingsSet ? city : 'Enter your city'}}"
            autocomplete= "on"
            formControlName="city"
            ></ion-searchbar>

             <ion-list style="cursor: pointer;">
              <ion-item color="secondary" *ngFor="let item of listOfCities" (click)="onCityClick(item)">
                {{ item.name }} {{item.country}}
              </ion-item>
            </ion-list>
            <span *ngIf="cityErrorMessage" style="color: aqua;">{{ cityErrorMessage }}</span>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col col-md-6 offset-md-3>
          <button
            type="submit"
            ion-button outline block color="light"
            [disabled]="(this.settingsForm.controls.temperatureUnit.pristine && this.temperatureUnit == null) || cityErrorMessage !== null"
            >SAVE</button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </form>
</ion-content>
